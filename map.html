<!DOCTYPE HTML>
<!--
	Slate by Pixelarity
	pixelarity.com @pixelarity
	License: pixelarity.com/license
-->
<html>
	<head>
    <script>window['ga-disable-UA-148476341-1'] = !window.location.href.includes('cs.wellesley.edu/~treevesm');</script>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-148476341-1"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-148476341-1');
		</script>

		<title>Promenade - Listen</title>
		<meta property="og:url"           content="https://cs.wellesley.edu/cs/~treevesm/about.html" >
		<meta property="og:type"          content="website" >
		<meta property="og:title"         content="Promenade" >
		<meta property="og:description"   content="Take a moment for poetic reflection." >
		<meta property="og:image"         content="https://cs.wellesley.edu/cs/~treevesm/images/title-logo.png" >
		<meta property="fb:app_id"        content="" >
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="https://use.typekit.net/xxd2frq.js"></script>
		<script>try{Typekit.load({ async: true });}catch(e){}</script>
		<link rel="stylesheet" href="assets/css/main.css" />
	    <link href="assets/css/promenade.css" rel="stylesheet">
	    <link href="web-map/css/map.css" rel="stylesheet">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="icon" type="image/ico" href="images/fl-favicon.png"/>
		<script type='application/javascript' src='assets/js/fastclick.js'></script>
		<link href="https://fonts.googleapis.com/css?family=Didact+Gothic" rel="stylesheet">
		<script src="assets/js/jquery.min.js"></script>
    <script src="config.js"></script>
	</head>
	<body>

		<!-- Header -->
		<header id="header">
				<div id="header-left">
					<a id="header-logo" href="index.html"><img src="images/header-logo.png" style="width: inherit;"></a>
					<div class="logo-subtitle">A poetic exploration of <span id="highlight"> soundscapes</div>
				</div>
				<nav id="nav">
				<ul>
					<li><a href="index.html">About</a></li>
					<li><a href="speak.html">Share a Poem</a></li>
					<li class="selected"><a href="map.html">Listen to Others</a></li>
				</ul>
			</nav>
		</header>

		<!-- Banner -->
			<section id="banner" class="map">
				<div id="voicemap-loading">
                    <p>Loading stories...thanks for your patience! </p>
                </div>
                <div id="voicemap-block"></div>
				<article id="map-overlay">
				</article>
			</section>

		<!-- Play Button -->
			<section id="transport" class="wrapper ">
				<div class="inner">
					<div id="listen-controls">
						<div id="play" style="">
							Play
							<div id="stream-spinner" class="loading" style=""></div>
						</div>
					</div>
				</div>
				<audio id="streamplayer" style="">
					<!-- load dummy audio initially to allow for synchronous play requirement on Safari -->
					<source id="audiosource" type="audio/mp3" src="https://halseyburgund.com/audio/104K_IV.mp3"></source>
					Your browser does not support the audio format.
				</audio>
			</section>

		<!-- Tag Filters -->
			<section id="filters" class="wrapper ">
				<div class="inner">
					<div id="filter-tags"></div>
				</div>
			</section>

		<!-- Scripts -->
			<script src="https://code.jquery.com/jquery-1.12.4.min.js"   integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="   crossorigin="anonymous"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

		<!-- Listen Map scripts -->
			<script type="text/javascript" src="web-map/js/markerclusterer.min.js"></script>
		  <script src="https://cdnjs.cloudflare.com/ajax/libs/bowser/1.9.4/bowser.js"></script>
		  <script type="text/javascript" src="web-map/js/listen-map.js"></script>


			<script>
			    var centerLat = 42.348987;
			    var centerLon = -71.065085;

			    $(function() {
					var overlay;
					var map;
					artOverlay.prototype = new google.maps.OverlayView();

			        var myOptions = {
			            scrollwheel: false,
			            zoom: 13,
						minZoom: 2,
						maxZoom: 16,
			            center: new google.maps.LatLng(centerLat, centerLon),
						mapTypeId: google.maps.MapTypeId.ROADMAP, //HYBRID, TERRAIN, SATELLITE
						mapTypeControl: false,
						streetViewControl: false,
						styles: [
						    {
						        "featureType": "administrative",
						        "elementType": "all",
						        "stylers": [
						            {
						                "hue": "#000000"
						            },
						            {
						                "lightness": -100
						            },
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "landscape",
						        "elementType": "geometry",
						        "stylers": [
						            {
						                "visibility": "on"
						            },
						            {
						                "saturation": "-52"
						            },
						            {
						                "lightness": "-22"
						            },
						            {
						                "gamma": "1.52"
						            },
						            {
						                "hue": "#ff000c"
						            }
						        ]
						    },
						    {
						        "featureType": "landscape",
						        "elementType": "labels",
						        "stylers": [
						            {
						                "hue": "#000000"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": -100
						            },
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "poi",
						        "elementType": "all",
						        "stylers": [
						            {
						                "hue": "#000000"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": -100
						            },
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "road",
						        "elementType": "geometry",
						        "stylers": [
						            {
						                "hue": "#bbbbbb"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": 26
						            },
						            {
						                "visibility": "on"
						            }
						        ]
						    },
						    {
						        "featureType": "road",
						        "elementType": "labels",
						        "stylers": [
						            {
						                "hue": "#ffffff"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": 100
						            },
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "road.highway",
						        "elementType": "geometry",
						        "stylers": [
						            {
						                "lightness": "-19"
						            },
						            {
						                "saturation": "-35"
						            }
						        ]
						    },
						    {
						        "featureType": "road.arterial",
						        "elementType": "geometry",
						        "stylers": [
						            {
						                "visibility": "on"
						            }
						        ]
						    },
						    {
						        "featureType": "road.arterial",
						        "elementType": "geometry.fill",
						        "stylers": [
						            {
						                "color": "#faf7f7"
						            },
						            {
						                "visibility": "on"
						            }
						        ]
						    },
						    {
						        "featureType": "road.arterial",
						        "elementType": "geometry.stroke",
						        "stylers": [
						            {
						                "color": "#e75b5b"
						            },
						            {
						                "weight": "1.19"
						            },
						            {
						                "visibility": "on"
						            }
						        ]
						    },
						    {
						        "featureType": "road.arterial",
						        "elementType": "labels.text",
						        "stylers": [
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "road.local",
						        "elementType": "all",
						        "stylers": [
						            {
						                "hue": "#ffffff"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": 100
						            },
						            {
						                "visibility": "on"
						            }
						        ]
						    },
						    {
						        "featureType": "road.local",
						        "elementType": "geometry",
						        "stylers": [
						            {
						                "visibility": "on"
						            },
						            {
						                "lightness": "4"
						            },
						            {
						                "color": "#bba6aa"
						            },
						            {
						                "saturation": "-30"
						            }
						        ]
						    },
						    {
						        "featureType": "road.local",
						        "elementType": "labels.text",
						        "stylers": [
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "transit",
						        "elementType": "labels",
						        "stylers": [
						            {
						                "hue": "#000000"
						            },
						            {
						                "lightness": -100
						            },
						            {
						                "visibility": "off"
						            }
						        ]
						    },
						    {
						        "featureType": "water",
						        "elementType": "geometry",
						        "stylers": [
						            {
						                "hue": "#ffffff"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": 100
						            },
						            {
						                "visibility": "on"
						            }
						        ]
						    },
						    {
						        "featureType": "water",
						        "elementType": "labels",
						        "stylers": [
						            {
						                "hue": "#000000"
						            },
						            {
						                "saturation": -100
						            },
						            {
						                "lightness": -100
						            },
						            {
						                "visibility": "off"
						            }
						        ]
						    }
						]
			        };

			        var map = new google.maps.Map(document.getElementById("voicemap-block"), myOptions);

					// Initialize the map and the custom overlay.

					function initMap() {

						// set lower left and upper right coordinates of overlay
						var bounds = new google.maps.LatLngBounds(
							new google.maps.LatLng(42.213772, -71.207470),
							new google.maps.LatLng(42.408693, -70.912608)
						);

						var srcImage = 'images/overlay2.png';
						// The custom overlay object contains the image,
						// the bounds of the image, and a reference to the map.
						overlay = new artOverlay(bounds, srcImage, map);
					}

					/** @constructor */
					function artOverlay(bounds, image, map) {
						// Initialize all properties.
						this.bounds_ = bounds;
						this.image_ = image;
						this.map_ = map;

						// Define a property to hold the image's div. We'll
						// actually create this div upon receipt of the onAdd()
						// method so we'll leave it null for now.
						this.div_ = null;

						// Explicitly call setMap on this overlay.
						this.setMap(map);
					}

					/**
					* onAdd is called when the map's panes are ready and the overlay has been
					* added to the map.
					*/
					artOverlay.prototype.onAdd = function() {
						var div = document.createElement('div');
						div.style.borderStyle = 'none';
						div.style.borderWidth = '0px';
						div.style.position = 'absolute';
						div.style.opacity = '0.9';

						// Create the img element and attach it to the div.
						var img = document.createElement('img');
						img.src = this.image_;
						img.style.width = '100%';
						img.style.height = '100%';
						img.style.position = 'absolute';
						div.appendChild(img);

						this.div_ = div;

						// Add the element to the "overlayLayer" pane.
						var panes = this.getPanes();
						panes.overlayLayer.appendChild(div);
					};

					artOverlay.prototype.draw = function() {
						// We use the south-west and north-east
						// coordinates of the overlay to peg it to the correct position and size.
						// To do this, we need to retrieve the projection from the overlay.
						var overlayProjection = this.getProjection();

						// Retrieve the south-west and north-east coordinates of this overlay
						// in LatLngs and convert them to pixel coordinates.
						// We'll use these coordinates to resize the div.
						var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
						var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());

						// Resize the image's div to fit the indicated dimensions.
						var div = this.div_;
						div.style.left = sw.x + 'px';
						div.style.top = ne.y + 'px';
						div.style.width = (ne.x - sw.x) + 'px';
						div.style.height = (sw.y - ne.y) + 'px';
					};

					// The onRemove() method will be called automatically from the API if
					// we ever set the overlay's map property to 'null'.
					artOverlay.prototype.onRemove = function() {
						this.div_.parentNode.removeChild(this.div_);
						this.div_ = null;
					};

			        google.maps.event.addDomListener(window, 'load', initMap);

			        var lm = new Roundware.ListenMap({ url : roundwareServerUrl + "/api/1/"});
			        lm.main(roundwareProjectId, map);

			    });

			    $(function() {
				    FastClick.attach(document.body);
				});

			</script>
			<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyDIFud7QfPIHlJ_UTIgLKOoBtZEGjH_yIQ"></script>
	</body>
</html>
