<!DOCTYPE HTML>

<html>
  <head>
    <script>window['ga-disable-UA-148476341-1'] = !window.location.href.includes('cs.wellesley.edu/~treevesm');</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-148476341-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-148476341-1');
    </script>

    <title>Promenade - Share</title>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <link rel="stylesheet" href="assets/css/promenade.css"/>
    <link rel="stylesheet" href="web-recorder/css/speak.css"/>
    <link rel="icon" type="image/ico" href="images/p-favicon.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.dropotron.min.js"></script>
    <script src="assets/js/skel.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="https://use.typekit.net/xxd2frq.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <script src="config.js"></script>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.5.0/css/all.css' integrity='sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU' crossorigin='anonymous'>
  </head>
  <body>
  	<!-- Header -->
    <header id="header">
        <div id="header-left">
          <a id="header-logo" href="index.html"><img src="images/header-logo.png" style="width: inherit;"></a>
          <div class="logo-subtitle">A poetic exploration of <span id="highlight"> soundscapes</div>
        </div>
        <nav id="nav">
        <ul>
          <li><a href="index.html">About</a></li>
          <li class="selected"><a href="speak.html">Share a Poem</a></li>
          <li><a href="map.html">Listen to Others</a></li>
        </ul>
      </nav>
    </header>

    <!-- Banner -->
	<section id="banner">
		<article class="visible top">
		    <div class="inner">
          <div id="recording-title">
              Create <span id="highlight">a poem</span> to shape the soundscape. <!--Prepare for your recording and build our shared experience.--> 
          </div>
          <div id="recording-instruction">
            Please <span id="highlight">answer the following questions</span> to begin writing your poem. Observe the space around you and answer some questions.
          </div>

          <div id="uiSpeakDisplay"></div>
        
			    <h2>Select a location for your contribution.</h2>
          <input id="pac-input" class="controls" type="text" placeholder="Enter a location">
			    <div id="speakMap"></div>

          <h2>Make Recording</h2>
          <div id="controls">
            <div id="re-record-wrapper">
              <img id="rerecordButton" src="web-recorder/images/re-record.png" alt="re-record">
              <p>Re-Record</p>
            </div>
            <div id="record-wrapper">
              <img id="recordButton" src="web-recorder/images/record.png" alt="record">
              <p id="recordButtonCaption"></p>
            </div>

            <div id="upload-wrapper">
              <img id="uploadButton" src="web-recorder/images/upload.png" alt="upload" style="display: inherit;">
              <p>Upload</p>
              <div id="upload-spinner" class="loading" style="display: none;"></div>
            </div>
          </div>
			    <div id="inputmeter"></div>
          <div id="waveform"></div>
          <div id="countdown">3:00</div>
			</div>
		</article>
	</section>

    <script type="text/javascript" src="/web-speak/modernizr-custom.js"></script>
    <!-- online deployment -->
    <script type="text/javascript" src="https://unpkg.com/roundware-web-framework@0.0.1-alpha.11/dist/roundware.umd.min.js"></script>
    <script type="text/javascript" src="/web-speak/jquery-3.2.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bowser/1.9.4/bowser.js"></script>
    <script type="text/javascript" src="/web-speak/WavAudioEncoder.js"></script>
    <script type="text/javascript" src="/web-speak/recording.js"></script>
    <script type="text/javascript" src="/web-speak/recorder.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/2.2.1/wavesurfer.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/2.2.1/plugin/wavesurfer.timeline.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/2.2.1/plugin/wavesurfer.microphone.min.js"></script>
    <script type="text/javascript" src="/web-speak/main.js"></script>

<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyDIFud7QfPIHlJ_UTIgLKOoBtZEGjH_yIQ&libraries=places"></script>

    <script src="assets/js/alertify.js"></script>

    <script>
      const bowser = window.bowser.detect(window.navigator.userAgent);
      if (bowser.ios && bowser.safari) {
        console.log("Mobile safari detected");
      } else if (bowser.ios && (bowser.chrome || bowser.firefox)) {
        console.log("Chrome/Firefox on iOS device detected");
        alertify
						.okBtn("Listen")
            .alert('Audio recording is not available in Chrome or Firefox on iOS. <br><br>'
              + 'Please use a desktop browser or iOS Safari to record your lullaby.<br><br>'
              + 'Instead, listen to recordings by clicking below. Thank you!', function () {
                    window.location.replace("map.html");
            });
      }
    </script>
  </body>
</html>
